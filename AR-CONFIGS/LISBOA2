config t

! Enable OSPF1
router ospf 1

! LISBOA 1
int f0/0
no shut
ip address 4.4.4.5 255.255.255.252

! MADRID
int f0/1
no shut
ip address 4.4.4.9 255.255.255.252

! PORTO / AVEIRO
int f1/0
no shut
ip ospf 1 area 0
ip address 10.0.0.2 255.255.255.248

! OEIRAS
int f1/1
no shut
ip ospf 1 area 0
ip address 10.0.0.9 255.255.255.252

! DATACENTER LISBOA
int f2/0
no shut
ip ospf 1 area 0
ip address 10.2.0.1 255.255.128.0

! LoopBack
int lo0
ip address 10.3.1.2 255.255.255.255
ip ospf 1 area 0

! BGP
router bgp 1000
address-family ipv4 unicast

! AGGREGATE IPs

!! netD1
aggregate-address 192.168.1.0 255.255.255.0
!! Empresa A
aggregate-address 110.1.1.0 255.255.255.0
!! Empresa B
aggregate-address 111.1.1.0 255.255.255.0
!! DataCenters
aggregate-address 10.2.0.0 255.255.0.0

! REDRISTRIBUTE PATHS FROM OSPF 1
redistribute ospf 1

! NEIGHBORS

!! MADRID (EGP)
neighbor 4.4.4.10 remote-as 20000

!! LISBOA 1 (EGP)
neighbor 4.4.4.6 remote-as 40000

!! PORTO (IGP)
neighbor 10.3.1.1 remote-as 1000
neighbor 10.3.1.1 update-source lo0
neighbor 10.3.1.1 next-hop-self

!! AVEIRO (IGP)
neighbor 10.3.1.3 remote-as 1000
neighbor 10.3.1.3 update-source lo0
neighbor 10.3.1.3 next-hop-self

!! OEIRAS (IGP)
neighbor 10.3.1.4 remote-as 1000
neighbor 10.3.1.4 update-source lo0
neighbor 10.3.1.4 next-hop-self

end
write